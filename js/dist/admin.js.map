{"version":3,"file":"admin.js","sources":["../src/common/components/EmptyState.tsx","../src/common/components/LoadMoreButton.tsx","../src/common/components/ListContainer.tsx","../src/admin/components/UserSubmissionReviewModal.tsx","../src/admin/components/UserSubmissionListItem.tsx","../src/common/hooks/usePagination.ts","../src/admin/components/SettingsPage.tsx","../src/forum/model/UserSubmission.ts","../src/admin/index.ts"],"sourcesContent":["import app from 'flarum/forum/app';\r\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\r\n\r\ninterface EmptyStateAttrs extends ComponentAttrs {\r\n  message?: string;\r\n}\r\n\r\n/**\r\n * Reusable Empty State component\r\n */\r\nexport default class EmptyState extends Component<EmptyStateAttrs> {\r\n  view() {\r\n    const { message } = this.attrs;\r\n    const displayMessage = message || app.translator.trans('wusong8899-user-submission.lib.list-empty');\r\n\r\n    return (\r\n      <div className=\"user-submission-empty-state\">\r\n        {displayMessage}\r\n      </div>\r\n    );\r\n  }\r\n}","import app from 'flarum/forum/app';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\r\n\r\ninterface LoadMoreButtonAttrs extends ComponentAttrs {\r\n  loading: boolean;\r\n  hasMore: boolean;\r\n  onClick: () => void;\r\n}\r\n\r\n/**\r\n * Reusable Load More Button component\r\n */\r\nexport default class LoadMoreButton extends Component<LoadMoreButtonAttrs> {\r\n  view() {\r\n    const { loading, hasMore, onClick } = this.attrs;\r\n\r\n    if (!hasMore || loading) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"user-submission-load-more-container\">\r\n        <Button \r\n          className=\"Button Button--primary\" \r\n          disabled={loading} \r\n          loading={loading} \r\n          onclick={onClick}\r\n        >\r\n          {app.translator.trans('wusong8899-user-submission.lib.list-load-more')}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}","import Component, { ComponentAttrs } from 'flarum/common/Component';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport EmptyState from './EmptyState';\r\nimport LoadMoreButton from './LoadMoreButton';\r\nimport { UserSubmissionData } from '../../types';\r\n\r\ninterface ListContainerAttrs extends ComponentAttrs {\r\n  items: UserSubmissionData[];\r\n  loading: boolean;\r\n  hasMore: boolean;\r\n  onLoadMore: () => void;\r\n  renderItem: (item: UserSubmissionData) => any;\r\n  emptyMessage?: string;\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Reusable List Container component with loading, empty states, and pagination\r\n */\r\nexport default class ListContainer extends Component<ListContainerAttrs> {\r\n  view() {\r\n    const { \r\n      items, \r\n      loading, \r\n      hasMore, \r\n      onLoadMore, \r\n      renderItem, \r\n      emptyMessage,\r\n      className = 'user-submission-list'\r\n    } = this.attrs;\r\n\r\n    return (\r\n      <div>\r\n        <ul className={className}>\r\n          {items.map((item) => (\r\n            <li key={item.id()} className={`${className}__item`}>\r\n              {renderItem(item)}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        {!loading && items.length === 0 && (\r\n          <EmptyState message={emptyMessage} />\r\n        )}\r\n\r\n        <LoadMoreButton \r\n          loading={loading}\r\n          hasMore={hasMore && !loading}\r\n          onClick={onLoadMore}\r\n        />\r\n\r\n        {loading && (\r\n          <div className=\"UserSubmission-loadMore\">\r\n            <LoadingIndicator size=\"large\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import app from 'flarum/admin/app';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport { UserSubmissionData } from '../../types';\r\n\r\ninterface UserSubmissionReviewModalAttrs {\r\n  itemData: UserSubmissionData;\r\n}\r\n\r\nexport default class UserSubmissionReviewModal extends Modal<UserSubmissionReviewModalAttrs> {\r\n  static isDismissibleViaBackdropClick = false;\r\n  static isDismissibleViaCloseButton = true;\r\n\r\n  private itemData!: UserSubmissionData;\r\n  private loading: boolean = false;\r\n\r\n  oninit(vnode: any) {\r\n    super.oninit(vnode);\r\n    this.itemData = this.attrs.itemData;\r\n    this.loading = false;\r\n  }\r\n\r\n  className() {\r\n    return 'Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('wusong8899-user-submission.admin.submission-review');\r\n  }\r\n\r\n  content() {\r\n    //\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form-group user-submission-admin__modal-form-group\">\r\n          {Button.component(\r\n            {\r\n              className: 'Button Button--primary user-submission-admin__modal-button',\r\n              disabled: this.loading,\r\n              onclick: (e: Event) => {\r\n                this.reviewConfirm(e, 'approved');\r\n              }\r\n            },\r\n            app.translator.trans('wusong8899-user-submission.lib.accept')\r\n          )}&nbsp;\r\n          {Button.component(\r\n            {\r\n              className: 'Button Button--danger user-submission-admin__modal-button',\r\n              disabled: this.loading,\r\n              onclick: (e: Event) => {\r\n                this.reviewConfirm(e, 'rejected');\r\n              }\r\n            },\r\n            app.translator.trans('wusong8899-user-submission.lib.decline')\r\n          )}&nbsp;\r\n          {Button.component(\r\n            {\r\n              className: 'Button user-submission-admin__modal-button',\r\n              disabled: this.loading,\r\n              onclick: () => {\r\n                this.hide();\r\n              }\r\n            },\r\n            app.translator.trans('wusong8899-user-submission.lib.cancel')\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private reviewConfirm(e: Event, value: 'approved' | 'rejected'): void {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n    this.itemData.save({\r\n      reviewResult: value,\r\n    })\r\n    .then(() => {\r\n      this.hide();\r\n      this.loading = false;\r\n    })\r\n    .catch(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n}\r\n","import app from 'flarum/admin/app';\r\nimport Component, { ComponentAttrs } from \"flarum/Component\";\r\nimport Button from 'flarum/common/components/Button';\r\nimport UserSubmissionReviewModal from './UserSubmissionReviewModal';\r\nimport username from \"flarum/common/helpers/username\";\r\nimport { UserSubmissionData } from '../../types';\r\n\r\ninterface UserSubmissionListItemAttrs extends ComponentAttrs {\r\n  itemData: UserSubmissionData;\r\n}\r\n\r\nexport default class UserSubmissionListItem extends Component<UserSubmissionListItemAttrs> {\r\n\r\n  view() {\r\n    const { itemData } = this.attrs;\r\n\r\n    const amount = itemData.amount();\r\n    const userAccount = itemData.user_account();\r\n    const fromUser = itemData.fromUser();\r\n    const reviewResult = itemData.review_result();\r\n    const reviewResultText = app.translator.trans(\r\n      reviewResult === 'approved'\r\n        ? 'wusong8899-user-submission.lib.list-submission-accept'\r\n        : 'wusong8899-user-submission.lib.list-submission-decline'\r\n    );\r\n    const assignedAt = itemData.assigned_at();\r\n    const reviewedAt = itemData.reviewed_at();\r\n\r\n    // const bidText = moneyName.replace('[money]', bidValue);\r\n\r\n    return (\r\n      <div className=\"biddingRankSettingContainer\">\r\n        <div style=\"float:right\">\r\n          <div style=\"display: flex; gap: 5px; align-items: center;\">\r\n            {reviewedAt && (\r\n              <div>\r\n                {Button.component({\r\n                  style: \"font-weight:bold;\",\r\n                  disabled: true,\r\n                  className: 'Button',\r\n                },\r\n                app.translator.trans('wusong8899-user-submission.admin.list-reviewed')\r\n                )}\r\n              </div>\r\n            )}\r\n            {!reviewedAt && (\r\n              <div>\r\n                {Button.component({\r\n                  style: \"font-weight:bold;\",\r\n                  className: 'Button Button--primary',\r\n                  onclick: () => {\r\n                    this.reviewItem(itemData)\r\n                  }\r\n                },\r\n                app.translator.trans('wusong8899-user-submission.admin.list-review')\r\n                )}\r\n              </div>\r\n            )}\r\n            <div>\r\n              {Button.component({\r\n                className: 'Button Button--danger',\r\n                icon: 'fas fa-trash',\r\n                title: app.translator.trans('wusong8899-user-submission.admin.delete-submission'),\r\n                onclick: () => {\r\n                  this.deleteItem(itemData)\r\n                }\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <b>{app.translator.trans('wusong8899-user-submission.lib.list-username')}: </b>\r\n          {username(fromUser)}&nbsp;|&nbsp;\r\n          <b>{app.translator.trans('wusong8899-user-submission.lib.list-amount')}: </b>\r\n          {amount}&nbsp;|&nbsp;\r\n          <b>{app.translator.trans('wusong8899-user-submission.lib.list-assignedAt')}: </b>\r\n          {assignedAt}\r\n        </div>\r\n        <div>\r\n          <b>{app.translator.trans('wusong8899-user-submission.lib.list-userAccount')}: </b>\r\n          {userAccount}\r\n        </div>\r\n        {reviewedAt && (\r\n          <div>\r\n            <b>{app.translator.trans('wusong8899-user-submission.lib.list-reviewResult')}: </b>\r\n            {reviewResultText}&nbsp;|&nbsp;\r\n            <b>{app.translator.trans('wusong8899-user-submission.lib.list-reviewAt')}: </b>\r\n            {reviewedAt}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private reviewItem(itemData: UserSubmissionData): void {\r\n    app.modal.show(UserSubmissionReviewModal, { itemData });\r\n  }\r\n\r\n  private deleteItem(itemData: UserSubmissionData): void {\r\n    if (confirm(app.translator.trans('wusong8899-user-submission.admin.confirm-delete'))) {\r\n      app.request({\r\n        method: 'DELETE',\r\n        url: app.forum.attribute('apiUrl') + '/userSubmissionList/' + itemData.id(),\r\n      })\r\n        .then(() => {\r\n          // Refresh the page or remove the item from the list\r\n          window.location.reload();\r\n        })\r\n        .catch(() => {\r\n          alert(app.translator.trans('wusong8899-user-submission.admin.delete-failed'));\r\n        });\r\n    }\r\n  }\r\n}\r\n","import { UserSubmissionData } from '../../types';\r\nimport m from 'mithril';\r\n\r\ninterface PaginationState {\r\n  loading: boolean;\r\n  moreResults: boolean;\r\n  items: UserSubmissionData[];\r\n}\r\n\r\ninterface PaginationActions {\r\n  setLoading: (loading: boolean) => void;\r\n  setMoreResults: (hasMore: boolean) => void;\r\n  addItems: (newItems: UserSubmissionData[]) => void;\r\n  resetItems: () => void;\r\n  hasMoreResults: () => boolean;\r\n  loadMore: (loadFunction: (offset: number) => Promise<UserSubmissionData[]>) => Promise<void>;\r\n}\r\n\r\n/**\r\n * Custom hook for pagination logic\r\n * Since Flarum doesn't have native hooks, this is implemented as a factory function\r\n */\r\nexport function createPaginationState(): PaginationState & PaginationActions {\r\n  const state: PaginationState = {\r\n    loading: true,\r\n    moreResults: false,\r\n    items: []\r\n  };\r\n\r\n  const actions: PaginationActions = {\r\n    setLoading(loading: boolean) {\r\n      state.loading = loading;\r\n      m.redraw();\r\n    },\r\n\r\n    setMoreResults(hasMore: boolean) {\r\n      state.moreResults = hasMore;\r\n    },\r\n\r\n    addItems(newItems: UserSubmissionData[]) {\r\n      state.items.push(...newItems);\r\n    },\r\n\r\n    resetItems() {\r\n      state.items = [];\r\n    },\r\n\r\n    hasMoreResults() {\r\n      return state.moreResults;\r\n    },\r\n\r\n    async loadMore(loadFunction: (offset: number) => Promise<UserSubmissionData[]>) {\r\n      if (state.loading) return; // Prevent multiple simultaneous requests\r\n      \r\n      state.loading = true;\r\n      m.redraw();\r\n      \r\n      try {\r\n        const results = await loadFunction(state.items.length);\r\n        // Results will be processed by parseResults function\r\n        return results;\r\n      } catch (error) {\r\n        console.error('Error loading more items:', error);\r\n        state.loading = false;\r\n        m.redraw();\r\n        throw error;\r\n      }\r\n    }\r\n  };\r\n\r\n  return { ...state, ...actions };\r\n}\r\n\r\n/**\r\n * Parse results helper function\r\n */\r\nexport function parseResults(\r\n  pagination: ReturnType<typeof createPaginationState>,\r\n  results: UserSubmissionData[]\r\n): UserSubmissionData[] {\r\n  // For Flarum store.find() results, the pagination info is usually in the payload\r\n  // Check for pagination links in different possible locations\r\n  let hasMoreResults = false;\r\n  \r\n  // Try different paths where pagination info might be stored\r\n  if (results && typeof results === 'object') {\r\n    const payload = results as any;\r\n    \r\n    // Check for standard JSON:API pagination links\r\n    hasMoreResults = !!(payload.links?.next) || \r\n                     !!(payload.meta?.hasMore) ||\r\n                     !!(payload.payload?.links?.next) ||\r\n                     // For collections, check if we got a full page\r\n                     (Array.isArray(results) && results.length >= 20); // Assuming 20 is default page size\r\n  }\r\n  \r\n  pagination.setMoreResults(hasMoreResults);\r\n  \r\n  // Handle both array results and wrapped results\r\n  const itemsToAdd = Array.isArray(results) ? results : (results as any).data || [];\r\n  if (itemsToAdd.length > 0) {\r\n    pagination.addItems(itemsToAdd);\r\n  }\r\n  \r\n  pagination.setLoading(false);\r\n\r\n  return Array.isArray(results) ? results : itemsToAdd;\r\n}","import app from 'flarum/admin/app';\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport ListContainer from '../../common/components/ListContainer';\r\nimport UserSubmissionListItem from './UserSubmissionListItem';\r\nimport { UserSubmissionData } from '../../types';\r\nimport { createPaginationState, parseResults } from '../../common/hooks/usePagination';\r\n\r\nexport default class UserSubmissionSettingsPage extends ExtensionPage {\r\n  private pagination = createPaginationState();\r\n\r\n  oninit(attrs: any) {\r\n    super.oninit(attrs);\r\n    this.loadResults();\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"ExtensionPage-settings FlarumBadgesPage\">\r\n        <div className=\"container\">\r\n          <ListContainer\r\n            items={this.pagination.items}\r\n            loading={this.pagination.loading}\r\n            hasMore={this.pagination.hasMoreResults()}\r\n            onLoadMore={() => this.loadMore()}\r\n            renderItem={(itemData) => UserSubmissionListItem.component({ itemData })}\r\n            className=\"user-submission-admin__list\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  private async loadMore(): Promise<void> {\r\n    try {\r\n      await this.pagination.loadMore((offset) => this.loadResults(offset));\r\n    } catch (error) {\r\n      console.error('Failed to load more results:', error);\r\n    }\r\n  }\r\n\r\n  private parseResults(results: UserSubmissionData[]): UserSubmissionData[] {\r\n    return parseResults(this.pagination, results);\r\n  }\r\n\r\n  private loadResults(offset: number = 0): Promise<UserSubmissionData[]> {\r\n    return app.store\r\n      .find(\"userSubmissionList\", {\r\n        page: {\r\n          offset\r\n        },\r\n      })\r\n      .catch((error) => {\r\n        console.error('Failed to load user submissions:', error);\r\n        this.pagination.setLoading(false);\r\n        return [];\r\n      })\r\n      .then(this.parseResults.bind(this));\r\n  }\r\n\r\n}\r\n","import Model from \"flarum/common/Model\";\r\nimport User from \"flarum/common/models/User\";\r\nimport { UserSubmissionAttributes, UserSubmissionReviewResult, UserSubmissionReviewStatus } from \"../../types\";\r\n\r\n/**\r\n * Enhanced UserSubmission Model with strict typing and modern Flarum patterns\r\n */\r\nexport default class UserSubmission extends Model<UserSubmissionAttributes> {\r\n  // Core attributes with strict types\r\n  declare id: () => string;\r\n  declare amount: () => number;\r\n  declare user_account: () => string;\r\n  declare submission_user_id: () => string;\r\n  declare review_user_id: () => string | null;\r\n  declare review_result: () => UserSubmissionReviewResult | null;\r\n  declare assigned_at: () => Date;\r\n  declare reviewed_at: () => Date | null;\r\n  declare created_at: () => Date;\r\n  declare updated_at: () => Date;\r\n\r\n  // Relationship accessors with proper typing\r\n  declare fromUser: () => User | false;\r\n  declare reviewUser: () => User | null | false;\r\n\r\n  /**\r\n   * Check if submission is pending review\r\n   */\r\n  isPending(): boolean {\r\n    return this.review_result() === null && this.review_user_id() === null;\r\n  }\r\n\r\n  /**\r\n   * Check if submission is approved\r\n   */\r\n  isApproved(): boolean {\r\n    return this.review_result() === 'approved';\r\n  }\r\n\r\n  /**\r\n   * Check if submission is rejected\r\n   */\r\n  isRejected(): boolean {\r\n    return this.review_result() === 'rejected';\r\n  }\r\n\r\n  /**\r\n   * Get review status as human-readable string\r\n   */\r\n  getReviewStatus(): UserSubmissionReviewStatus {\r\n    const result = this.review_result();\r\n    if (result === 'approved') return 'approved';\r\n    if (result === 'rejected') return 'rejected';\r\n    return 'pending';\r\n  }\r\n\r\n  /**\r\n   * Get formatted amount for display\r\n   */\r\n  getFormattedAmount(): string {\r\n    return this.amount().toFixed(2);\r\n  }\r\n\r\n  /**\r\n   * Check if submission can be edited\r\n   */\r\n  canEdit(): boolean {\r\n    return this.isPending();\r\n  }\r\n\r\n  /**\r\n   * Get time since submission\r\n   */\r\n  getTimeSinceSubmission(): number {\r\n    return Date.now() - this.created_at().getTime();\r\n  }\r\n}\r\n\r\n// Modern attribute and relationship definitions\r\nObject.assign(UserSubmission.prototype, {\r\n  id: Model.attribute(\"id\"),\r\n  amount: Model.attribute(\"amount\", Number),\r\n  user_account: Model.attribute(\"user_account\"),\r\n  submission_user_id: Model.attribute(\"submission_user_id\"),\r\n  review_user_id: Model.attribute(\"review_user_id\"),\r\n  review_result: Model.attribute(\"review_result\"),\r\n  assigned_at: Model.attribute(\"assigned_at\", Model.transformDate),\r\n  reviewed_at: Model.attribute(\"reviewed_at\", Model.transformDate),\r\n  created_at: Model.attribute(\"created_at\", Model.transformDate),\r\n  updated_at: Model.attribute(\"updated_at\", Model.transformDate),\r\n\r\n  // Relationships with proper naming for better clarity\r\n  fromUser: Model.hasOne(\"fromUser\"),\r\n  reviewUser: Model.hasOne(\"reviewUser\"),\r\n});\r\n","import app from 'flarum/admin/app';\r\nimport SettingsPage from './components/SettingsPage';\r\nimport UserSubmission from \"../forum/model/UserSubmission\";\r\n\r\napp.initializers.add('wusong8899-user-submission', () => {\r\n  app.store.models.userSubmissionList = UserSubmission;\r\n  app.extensionData\r\n    .for('wusong8899-user-submission')\r\n    .registerPage(SettingsPage);\r\n});\r\n"],"names":["EmptyState","Component","message","displayMessage","app","LoadMoreButton","loading","hasMore","onClick","Button","ListContainer","items","onLoadMore","renderItem","emptyMessage","className","item","LoadingIndicator","_UserSubmissionReviewModal","Modal","vnode","e","value","UserSubmissionReviewModal","UserSubmissionListItem","itemData","amount","userAccount","fromUser","reviewResult","reviewResultText","assignedAt","reviewedAt","username","createPaginationState","state","m","newItems","loadFunction","error","parseResults","pagination","results","hasMoreResults","payload","itemsToAdd","UserSubmissionSettingsPage","ExtensionPage","attrs","offset","UserSubmission","Model","result","SettingsPage"],"mappings":"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"}