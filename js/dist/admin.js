(function(o,l,i,u,p,c,t){"use strict";class d extends p{static isDismissibleViaBackdropClick=!1;static isDismissibleViaCloseButton=!0;oninit(s){super.oninit(s),this.itemData=this.attrs.itemData,this.loading=!1}className(){return"Modal--small"}title(){return app.translator.trans("wusong8899-user-submission.admin.submission-review")}content(){return m("div",{className:"Modal-body"},m("div",{className:"Form-group",style:"text-align: center;"},i.component({style:"min-width:66px;",className:"Button Button--primary",disabled:this.loading,onclick:s=>{this.reviewConfirm(s,1)}},app.translator.trans("wusong8899-user-submission.lib.accept"))," ",i.component({style:"min-width:66px;",className:"Button Button--danger",disabled:this.loading,onclick:s=>{this.reviewConfirm(s,0)}},app.translator.trans("wusong8899-user-submission.lib.decline"))," ",i.component({style:"min-width:66px;",className:"Button",disabled:this.loading,onclick:()=>{this.hide()}},app.translator.trans("wusong8899-user-submission.lib.cancel"))))}reviewConfirm(s,e){s.preventDefault(),this.loading=!0,this.itemData.save({reviewResult:e}).then(()=>{this.hide(),this.loading=!1})}}class b extends u{view(){const{itemData:s}=this.attrs,e=s.amount(),h=s.platform(),w=s.platform_account(),v=s.user_account(),f=s.fromUser(),x=s.review_result(),y=app.translator.trans(x===1?"wusong8899-user-submission.lib.list-submission-accept":"wusong8899-user-submission.lib.list-submission-decline"),_=s.assigned_at(),n=s.reviewed_at();return m("div",{className:"biddingRankSettingContainer"},m("div",{style:"float:right"},n&&m("div",{style:"padding:0px 0px 5px 5px"},i.component({style:"font-weight:bold;",disabled:!0,className:"Button"},app.translator.trans("wusong8899-user-submission.admin.list-reviewed"))),!n&&m("div",{style:"padding:0px 0px 5px 5px"},i.component({style:"font-weight:bold;",className:"Button Button--primary",onclick:()=>{this.reviewItem(s)}},app.translator.trans("wusong8899-user-submission.admin.list-review")))),m("div",null,m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-username"),": "),c(f)," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-amount"),": "),e," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-assignedAt"),": "),_),m("div",null,m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-platform"),": "),h," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-platformAccount"),": "),w," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-userAccount"),": "),v),n&&m("div",null,m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-reviewResult"),": "),y," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-reviewAt"),": "),n))}reviewItem(s){app.modal.show(d,{itemData:s})}}class g extends o{oninit(s){super.oninit(s),this.loading=!0,this.moreResults=!1,this.userSubmissionList=[],this.loadResults()}content(){let s;return this.loading&&(s=l.component({size:"large"})),m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("ul",{style:"padding:0px;list-style-type: none;"},this.userSubmissionList.map(e=>m("li",{itemID:e.id(),style:"margin-top:5px;background: var(--body-bg);"},b.component({itemData:e})))),!this.loading&&this.userSubmissionList.length===0&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},app.translator.trans("wusong8899-decoration-store.lib.list-empty"))),!s&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(i,{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:()=>this.loadMore()},app.translator.trans("wusong8899-user-submission.lib.list-load-more"))),s&&m("div",{className:"UserSubmission-loadMore"},s)))}hasMoreResults(){return this.moreResults}loadMore(){this.loading=!0,this.loadResults(this.userSubmissionList.length)}parseResults(s){return this.moreResults=!!s.payload.links&&!!s.payload.links.next,[].push.apply(this.userSubmissionList,s),this.loading=!1,m.redraw(),s}loadResults(s=0){return app.store.find("userSubmissionList",{page:{offset:s}}).catch(()=>{}).then(this.parseResults.bind(this))}}class r extends t{}Object.assign(r.prototype,{id:t.attribute("id"),amount:t.attribute("amount"),platform:t.attribute("platform"),platform_account:t.attribute("platform_account"),user_account:t.attribute("user_account"),submission_user_id:t.attribute("submission_user_id"),review_user_id:t.attribute("review_user_id"),review_result:t.attribute("review_result"),assigned_at:t.attribute("assigned_at"),reviewed_at:t.attribute("reviewed_at"),fromUser:t.hasOne("fromUser"),reviewUser:t.hasOne("reviewUser")}),app.initializers.add("wusong8899-user-submission",()=>{app.store.models.userSubmissionList=r,app.extensionData.for("wusong8899-user-submission").registerPage(g)})})(flarum.core.compat["components/ExtensionPage"],flarum.core.compat["components/LoadingIndicator"],flarum.core.compat["components/Button"],flarum.core.compat.Component,flarum.core.compat["components/Modal"],flarum.core.compat["helpers/username"],flarum.core.compat.Model);
//# sourceMappingURL=admin.js.map

module.exports={};