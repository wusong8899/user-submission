(()=>{var t={n:i=>{var e=i&&i.__esModule?()=>i.default:()=>i;return t.d(e,{a:e}),e},d:(i,e)=>{for(var s in e)t.o(e,s)&&!t.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};(()=>{"use strict";function e(t,i){return e=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},e(t,i)}function s(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,e(t,i)}t.r(i),flarum.core.compat.extend;const n=flarum.core.compat["components/ExtensionPage"];var r=t.n(n);const o=flarum.core.compat["components/LoadingIndicator"];var a=t.n(o);const l=flarum.core.compat["components/Button"];var u=t.n(l);const p=flarum.core.compat.Component;var c=t.n(p);const d=flarum.core.compat["components/Modal"];var b=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var e=i.prototype;return e.oninit=function(i){t.prototype.oninit.call(this,i),this.itemData=this.attrs.itemData,this.loading=!1},e.className=function(){return"Modal--small"},e.title=function(){return app.translator.trans("wusong8899-user-submission.admin.submission-review")},e.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form-group",style:"text-align: center;"},u().component({style:"min-width:66px;",className:"Button Button--primary",disabled:this.loading,onclick:function(i){t.reviewConfirm(i,1)}},app.translator.trans("wusong8899-user-submission.lib.accept"))," ",u().component({style:"min-width:66px;",className:"Button Button--danger",disabled:this.loading,onclick:function(i){t.reviewConfirm(i,0)}},app.translator.trans("wusong8899-user-submission.lib.decline"))," ",u().component({style:"min-width:66px;",className:"Button",disabled:this.loading,onclick:function(){t.hide()}},app.translator.trans("wusong8899-user-submission.lib.cancel"))))},e.reviewConfirm=function(t,i){var e=this;t.preventDefault(),this.loading=!0,this.itemData.save({reviewResult:i}).then((function(){return e.hide()}),(function(t){e.loading=!1}))},i}(t.n(d)());b.isDismissibleViaBackdropClick=!1,b.isDismissibleViaCloseButton=!0;const v=flarum.core.compat["helpers/username"];var f=t.n(v),h=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var e=i.prototype;return e.view=function(){var t=this,i=this.attrs.itemData,e=(app.forum.attribute("antoinefr-money.moneyname"),i.amount()),s=i.platform(),n=i.platform_account(),r=i.user_account(),o=i.fromUser(),a=(i.reviewUser(),i.review_result()),l=app.translator.trans(1===a?"wusong8899-user-submission.lib.list-submission-accept":"wusong8899-user-submission.lib.list-submission-decline"),p=i.assigned_at(),c=i.reviewed_at();return m("div",{className:"biddingRankSettingContainer"},m("div",{style:"float:right"},c&&m("div",{style:"padding:0px 0px 5px 5px"},u().component({style:"font-weight:bold;",disabled:!0,className:"Button"},app.translator.trans("wusong8899-user-submission.admin.list-reviewed"))),!c&&m("div",{style:"padding:0px 0px 5px 5px"},u().component({style:"font-weight:bold;",className:"Button Button--primary",onclick:function(e){t.reviewItem(i)}},app.translator.trans("wusong8899-user-submission.admin.list-review")))),m("div",null,m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-username"),": "),f()(o)," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-amount"),": "),e," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-assignedAt"),": "),p),m("div",null,m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-platform"),": "),s," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-platformAccount"),": "),n," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-userAccount"),": "),r),c&&m("div",null,m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-reviewResult"),": "),l," | ",m("b",null,app.translator.trans("wusong8899-user-submission.lib.list-reviewAt"),": "),c))},e.reviewItem=function(t){app.modal.show(b,{itemData:t})},i}(c()),g=function(t){function i(){return t.apply(this,arguments)||this}s(i,t);var e=i.prototype;return e.oninit=function(i){t.prototype.oninit.call(this,i),this.loading=!0,this.moreResults=!1,this.userSubmissionList=[],this.loadResults()},e.content=function(){var t,i=this;return this.loading&&(t=a().component({size:"large"})),m("div",{className:"ExtensionPage-settings FlarumBadgesPage"},m("div",{className:"container"},m("ul",{style:"padding:0px;list-style-type: none;"},this.userSubmissionList.map((function(t){return m("li",{itemID:t.id(),style:"margin-top:5px;background: var(--body-bg);"},h.component({itemData:t}))}))),!this.loading&&0===this.userSubmissionList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;line-height: 100px;"},app.translator.trans("wusong8899-decoration-store.lib.list-empty"))),!t&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(u(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return i.loadMore()}},app.translator.trans("wusong8899-user-submission.lib.list-load-more"))),t&&m("div",{className:"UserSubmission-loadMore"},t)))},e.hasMoreResults=function(){return this.moreResults},e.loadMore=function(){this.loading=!0,this.loadResults(this.userSubmissionList.length)},e.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.userSubmissionList,t),this.loading=!1,m.redraw(),t},e.loadResults=function(t){return void 0===t&&(t=0),app.store.find("userSubmissionList",{page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},i}(r());const y=flarum.core.compat.Model;var w=t.n(y),_=function(t){function i(){return t.apply(this,arguments)||this}return s(i,t),i}(w());Object.assign(_.prototype,{id:w().attribute("id"),amount:w().attribute("amount"),platform:w().attribute("platform"),platform_account:w().attribute("platform_account"),user_account:w().attribute("user_account"),submission_user_id:w().attribute("submission_user_id"),review_user_id:w().attribute("review_user_id"),review_result:w().attribute("review_result"),assigned_at:w().attribute("assigned_at"),reviewed_at:w().attribute("reviewed_at"),fromUser:w().hasOne("fromUser"),reviewUser:w().hasOne("reviewUser")}),app.initializers.add("wusong8899-user-submission",(function(){app.store.models.userSubmissionList=_,app.extensionData.for("wusong8899-user-submission").registerPage(g)}))})(),module.exports=i})();
//# sourceMappingURL=admin.js.map